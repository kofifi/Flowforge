import{j as e}from"./index-BQ9o7mEa.js";import{r as n}from"./reactflow-CgyvNGsb.js";import{u as f}from"./useThemePreference-BiXiARFG.js";import{I as y}from"./Icon-UISONTKN.js";import{u as N}from"./vendor-t4Ks9Nel.js";const x="".replace(/\/$/,"");function v(l){if(Array.isArray(l))return l;if(l&&typeof l=="object"&&"$values"in l){const c=l.$values;return Array.isArray(c)?c:[]}return[]}function P(){const[l,c]=n.useState([]),[r,d]=n.useState(!0),[i,m]=n.useState(null),{theme:u,toggleTheme:k}=f(),p=N();n.useEffect(()=>{let a=!1;async function o(){d(!0),m(null);try{const t=await fetch(`${x}/api/SystemBlock`);if(!t.ok)throw new Error(`Failed to load system blocks (${t.status})`);const j=await t.json();a||c(v(j))}catch(t){a||m(t instanceof Error?t.message:"Unable to load system blocks")}finally{a||d(!1)}}return o(),()=>{a=!0}},[]);const b=n.useMemo(()=>r?"Loading system blocks...":i||(l.length===0?"No system blocks found.":""),[l.length,i,r]),h={Start:{plLabel:"Start",enLabel:"Start",plDesc:"Blok początkowy",enDesc:"Start block"},End:{plLabel:"Koniec",enLabel:"End",plDesc:"Blok końcowy",enDesc:"End block"},Calculation:{plLabel:"Kalkulacja",enLabel:"Calculation",plDesc:"Blok kalkulacji",enDesc:"Calculation block"},If:{plLabel:"If",enLabel:"If",plDesc:"Blok warunkowy",enDesc:"Conditional block"},Switch:{plLabel:"Switch",enLabel:"Switch",plDesc:"Blok wielościeżkowy (case)",enDesc:"Switch (case) block"},HttpRequest:{plLabel:"HTTP",enLabel:"HttpRequest",plDesc:"Wywołanie HTTP (GET/POST itp.)",enDesc:"HTTP request block"},Parser:{plLabel:"Parser",enLabel:"Parser",plDesc:"Parser JSON/XML",enDesc:"Parser JSON/XML"},Loop:{plLabel:"Pętla",enLabel:"Loop",plDesc:"Powtarza gałąź wiele razy.",enDesc:"Loop block"}},s={navWorkflows:"Workflows",navBlocks:"Blocks",navExecutions:"Executions",title:"System blocks",subtitle:"Core block types available in the workflow editor.",statusLabel:"Read-only",availableTitle:"Available blocks",availableSubtitle:"These are seeded by the backend.",customTitle:"Custom blocks",customSubtitle:"Editor is coming next.",customState:"Custom block editor is not available yet.",systemPill:"System"};return e.jsxs("div",{className:"app-shell",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsxs("div",{className:"brand",children:[e.jsx("span",{className:"brand-mark",children:"F"}),e.jsxs("div",{children:[e.jsx("p",{className:"brand-name",children:"Flowforge"}),e.jsx("p",{className:"brand-subtitle",children:"Workflow Studio"})]})]}),e.jsxs("nav",{className:"nav",children:[e.jsx("button",{type:"button",className:"nav-item",onClick:()=>p("/"),children:s.navWorkflows}),e.jsx("button",{type:"button",className:"nav-item active",children:s.navBlocks}),e.jsx("button",{type:"button",className:"nav-item",onClick:()=>p("/executions"),children:s.navExecutions})]}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsx("p",{children:"Connected to local API"}),e.jsx("span",{className:"pill",children:x||"proxy /api"})]})]}),e.jsxs("main",{className:"main",children:[e.jsxs("header",{className:"topbar",children:[e.jsxs("div",{children:[e.jsx("h1",{children:s.title}),e.jsx("p",{className:"subtitle",children:s.subtitle})]}),e.jsxs("div",{className:"topbar-meta",children:[e.jsx("button",{type:"button",className:"icon-button",onClick:k,"aria-label":`Switch to ${u==="dark"?"light":"dark"} mode`,children:e.jsx(y,{name:u==="dark"?"sun":"moon"})}),e.jsxs("span",{className:"count",children:[l.length," total"]}),e.jsx("span",{className:"pill",children:s.statusLabel})]})]}),e.jsxs("section",{className:"panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("h2",{children:s.availableTitle}),e.jsx("p",{className:"muted",children:s.availableSubtitle})]}),b?e.jsx("div",{className:"state",children:b}):e.jsx("ul",{className:"blocks-list",children:l.map(a=>{var o,t;return e.jsxs("li",{className:"block-card",children:[e.jsxs("div",{children:[e.jsx("p",{className:"label",children:((o=h[a.type])==null?void 0:o.enLabel)??a.type}),e.jsx("p",{className:"meta",children:((t=h[a.type])==null?void 0:t.enDesc)??a.description})]}),e.jsx("span",{className:"pill",children:s.systemPill})]},a.id)})})]}),e.jsxs("section",{className:"panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("h2",{children:s.customTitle}),e.jsx("p",{className:"muted",children:s.customSubtitle})]}),e.jsx("div",{className:"state",children:s.customState})]})]})]})}export{P as default};
