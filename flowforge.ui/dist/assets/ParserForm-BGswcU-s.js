import{j as e}from"./index-BQ9o7mEa.js";import{V as h}from"./VariableSelect-DF1e_AzG.js";import"./reactflow-CgyvNGsb.js";import"./vendor-t4Ks9Nel.js";import"./Icon-UISONTKN.js";function $({panelId:c,variables:i,config:r,setParserConfigs:m,formatVariableDisplay:n,normalizeVariableName:p,markDirty:u}){const l=a=>{m(s=>({...s,[c]:{...r,...a}})),u()},d=(a,s,t)=>{const o=[...r.mappings];o[a]={...o[a],[s]:t},l({mappings:o})},j=()=>l({mappings:[...r.mappings,{path:"",variable:""}]}),x=a=>l({mappings:r.mappings.filter((s,t)=>t!==a)});return e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"drawer-label",htmlFor:"parser-format",children:[e.jsx("span",{className:"label-icon",children:e.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M5 6h14M5 12h14M5 18h14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}),"Format",e.jsx("p",{className:"muted",children:"JSON (e.g. HTTP response) or XML payload to parse."})]}),e.jsxs("select",{id:"parser-format",value:r.format,onChange:a=>l({format:a.target.value}),children:[e.jsx("option",{value:"json",children:"JSON"}),e.jsx("option",{value:"xml",children:"XML"})]}),e.jsx(h,{id:"parser-source",label:"Source variable",placeholder:"e.g. responseBody",value:n(r.sourceVariable),options:i.map(a=>`$${a.name}`),onValueChange:a=>l({sourceVariable:p(a)})}),e.jsxs("p",{className:"muted",children:["Point to the payload variable (e.g. ",e.jsx("code",{children:"$http.body"})," or ",e.jsx("code",{children:"$responseBody"}),"). For JSON arrays, include the array name in the path (e.g. ",e.jsx("code",{children:"$.responseBody[0].id"}),")."]}),e.jsxs("label",{className:"drawer-label",children:[e.jsx("span",{className:"label-icon",children:e.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M5 7h14M5 12h14M5 17h10",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}),"Mappings (path â†’ variable)"]}),e.jsxs("p",{className:"muted",children:["JSON: ",e.jsx("code",{children:"$.field"}),", ",e.jsx("code",{children:"$.items[0].id"}),". XML: ",e.jsx("code",{children:"/root/item/id"}),". Each mapping writes the matched value into the target variable."]}),e.jsxs("div",{className:"stacked-list",children:[(r.mappings.length?r.mappings:[{path:"",variable:""}]).map((a,s)=>e.jsxs("div",{className:"mapping-row",children:[e.jsx("input",{type:"text",placeholder:r.format==="json"?"$.payload.id":"/root/item/id",value:a.path,onChange:t=>d(s,"path",t.target.value)}),e.jsx(h,{id:`parser-var-${s}`,label:"",placeholder:"Variable (e.g. itemId)",value:n(a.variable),options:i.map(t=>`$${t.name}`),onValueChange:t=>d(s,"variable",p(t))}),e.jsx("button",{type:"button",className:"ghost",onClick:()=>x(s),children:"Remove"})]},`mapping-${s}`)),e.jsx("button",{type:"button",className:"ghost",onClick:j,children:"Add mapping"})]}),e.jsx("p",{className:"muted",children:"Paths: JSON uses dot/`$.field` style, XML uses XPath-like `/root/item/id`. Each mapping writes the matched value into the target variable."})]})}export{$ as default};
