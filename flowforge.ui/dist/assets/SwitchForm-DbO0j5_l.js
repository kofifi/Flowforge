import{j as o}from"./index-BQ9o7mEa.js";import{V as b}from"./VariableSelect-DF1e_AzG.js";import{I as $}from"./Icon-UISONTKN.js";import"./reactflow-CgyvNGsb.js";import"./vendor-t4Ks9Nel.js";function V({panelId:e,variables:p,config:u,normalizeSwitchCases:r,setSwitchConfigs:i,markDirty:x}){return o.jsxs(o.Fragment,{children:[o.jsx(b,{id:"switch-expression",label:"Expression / variable",placeholder:"$variable or literal",value:u.expression??"",options:p.map(t=>`$${t.name}`),onValueChange:t=>{i(a=>{var s;return{...a,[e]:{expression:t,cases:r((s=a[e])==null?void 0:s.cases)}}}),x()}}),o.jsxs("label",{className:"drawer-label",children:[o.jsx("span",{className:"label-icon",children:o.jsx($,{name:"rows"})}),"Cases"]}),(u.cases??[""]).map((t,a)=>o.jsx(b,{id:`switch-case-${e}-${a}`,label:`Case ${a+1}`,placeholder:"Value (e.g. pending)",value:t,options:p.map(s=>`$${s.name}`),showHints:!1,onValueChange:s=>{i(n=>{var l,m;const c=[...r((l=n[e])==null?void 0:l.cases)];return c[a]=s,{...n,[e]:{expression:((m=n[e])==null?void 0:m.expression)??"",cases:c}}}),x()},trailingAction:o.jsx("button",{type:"button",className:"ghost",onClick:()=>{i(s=>{var c,l;const n=r((c=s[e])==null?void 0:c.cases),h=n.length<=1?[""]:n.filter((m,j)=>j!==a);return{...s,[e]:{expression:((l=s[e])==null?void 0:l.expression)??"",cases:h}}}),x()},children:"Remove"})},`switch-case-${a}`)),o.jsx("button",{type:"button",className:"ghost",onClick:()=>{i(t=>{var s,n;const a=[...r((s=t[e])==null?void 0:s.cases),""];return{...t,[e]:{expression:((n=t[e])==null?void 0:n.expression)??"",cases:a}}}),x()},children:"Add case"}),o.jsx("p",{className:"muted",children:"Switch routes by matching case values to connection labels. Use the default handle for unmatched values."})]})}export{V as default};
